(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"0831":function(t,e,a){"use strict";a("0e60")},"0a74":function(t,e,a){"use strict";a("3a69")},"0b83":function(t,e,a){"use strict";a("4176")},"0e60":function(t,e,a){},"0f9d":function(t,e,a){},"0fc9":function(t,e,a){},"1b7a":function(t,e,a){},2532:function(t,e,a){"use strict";var o=a("23e7"),n=a("5a34"),i=a("1d80"),s=a("ab13");o({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~String(i(this)).indexOf(n(t),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(t,e,a){"use strict";var o=a("6eeb"),n=a("825a"),i=a("d039"),s=a("ad6d"),r="toString",l=RegExp.prototype,c=l[r],d=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=r;(d||u)&&o(RegExp.prototype,r,(function(){var t=n(this),e=String(t.source),a=t.flags,o=String(void 0===a&&t instanceof RegExp&&!("flags"in l)?s.call(t):a);return"/"+e+"/"+o}),{unsafe:!0})},2909:function(t,e,a){"use strict";function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,o=new Array(e);a<e;a++)o[a]=t[a];return o}function n(t){if(Array.isArray(t))return o(t)}a.d(e,"a",(function(){return l}));a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("d3b7"),a("3ca3"),a("ddb0");function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}a("fb6a"),a("b0c0"),a("25f0");function s(t,e){if(t){if("string"===typeof t)return o(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(t,e):void 0}}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return n(t)||i(t)||s(t)||r()}},"2d18":function(t,e,a){},"2e90":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("div",{staticClass:"wrapper"},[a("a-button",{staticClass:"add-module",attrs:{type:"primary"},on:{click:function(){return t.$emit("createListItem")}}},[t._v(" Добавить ")]),a("a-list",{staticClass:"demo-loadmore-list",attrs:{"item-layout":"horizontal","data-source":t.data},scopedSlots:t._u([{key:"renderItem",fn:function(e,o){return a("a-list-item",{on:{click:function(a){t.$emit("clickItem",e,o)}}},[t.needCheckbox?a("a-checkbox",{attrs:{slot:"actions",checked:e.isEditable},on:{change:function(a){a.stopPropagation(),t.$emit("handleChangeCheckbox",a.target.checked,e,o)}},slot:"actions"}):t._e(),e.isEdit?t._e():a("a",{attrs:{slot:"actions"},on:{click:function(a){a.stopPropagation(),t.$emit("handleEdit",a,e,o)}},slot:"actions"},[a("a-icon",{attrs:{type:"edit"}})],1),e.isEdit?a("a",{attrs:{slot:"actions"},on:{click:function(a){a.stopPropagation(),t.$emit("check",a,e,o)}},slot:"actions"},[a("a-icon",{attrs:{type:"check"}})],1):t._e(),a("a-popconfirm",{attrs:{slot:"actions",title:"Вы уверены?"},on:{confirm:function(a){a.stopPropagation(),t.$emit("handleDelete",a,e.ID)}},slot:"actions"},[a("a",{on:{click:function(t){t.stopPropagation()}}},[a("a-icon",{attrs:{type:"delete"}})],1)]),t.needUpDownArrows?a("a",{staticClass:"arrow",on:{click:function(a){a.stopPropagation(),t.$emit("up",a,e,o)}}},[a("a-icon",{attrs:{type:"arrow-up"}})],1):t._e(),t.needUpDownArrows?a("a",{staticClass:"arrow",on:{click:function(a){a.stopPropagation(),t.$emit("down",a,e,o)}}},[a("a-icon",{attrs:{type:"arrow-down"}})],1):t._e(),e.isEdit?a("a-input",{staticClass:"title",on:{pressEnter:function(a){return t.$emit("check",a,e,o)},focus:function(t){t.stopPropagation()},click:function(t){t.stopPropagation()},change:function(a){return t.$emit("handleChange",a,e,o)}},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}}):t._e(),a("a-list-item-meta",[e.isEdit?t._e():a("a",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(e.name)+" "+t._s(e.position)+" ")])])],1)}}])})],1)])},n=[],i={name:"List",props:{data:Array,needUpDownArrows:Boolean,needCheckbox:Boolean}},s=i,r=(a("51be"),a("2877")),l=Object(r["a"])(s,o,n,!1,null,"d087d1ca",null);e["a"]=l.exports},3530:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"admin"}},[a("router-view")],1)},n=[],i=a("2909"),s={name:"Admin",data:function(){return{modulesList:[]}},methods:{changeModulesList:function(t){this.modulesList=Object(i["a"])(t)}}},r=s,l=(a("de48"),a("2877")),c=Object(l["a"])(r,o,n,!1,null,"953c1aaa",null);e["default"]=c.exports},"3a69":function(t,e,a){},"3ca3":function(t,e,a){"use strict";var o=a("6547").charAt,n=a("69f3"),i=a("7dd0"),s="String Iterator",r=n.set,l=n.getterFor(s);i(String,"String",(function(t){r(this,{type:s,string:String(t),index:0})}),(function(){var t,e=l(this),a=e.string,n=e.index;return n>=a.length?{value:void 0,done:!0}:(t=o(a,n),e.index+=t.length,{value:t,done:!1})}))},4176:function(t,e,a){},"44e7":function(t,e,a){var o=a("861d"),n=a("c6b6"),i=a("b622"),s=i("match");t.exports=function(t){var e;return o(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==n(t))}},"498a":function(t,e,a){"use strict";var o=a("23e7"),n=a("58a8").trim,i=a("c8d2");o({target:"String",proto:!0,forced:i("trim")},{trim:function(){return n(this)}})},"4df1":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modules"},[a("div",{attrs:{id:"nav"}},[a("router-link",{attrs:{to:"/admin/modules"}},[t._v("Модули")]),t._l(t.data,(function(e){return a("router-link",{key:e.ID,attrs:{to:"/admin/modules/"+e.ID}},[t._v(" "+t._s(e.name)+" ")])}))],2),a("router-view"),"AdminModules"===t.$route.name?a("list",{attrs:{needUpDownArrows:!0,data:t.data},on:{handleEdit:t.handleEdit,check:t.check,handleDelete:t.handleDelete,up:t.up,down:t.down,createListItem:t.createModule,clickItem:t.clickItem}}):t._e()],1)},n=[],i=(a("4de4"),a("4160"),a("b0c0"),a("159b"),a("2909")),s=a("408b"),r=a("2e90"),l={components:{List:r["a"]},name:"Templates",data:function(){return{data:[]}},mounted:function(){this.loadModules()},methods:{putModule:function(t,e){var a=this;return s["a"].put("/modules?id=".concat(t),e).then((function(t){t&&t.data&&a.loadModules()})).catch((function(t){console.log(t)}))},loadModules:function(){var t=this;s["a"].get("/modules?limit=all").then((function(e){if(e&&e.data){var a=e.data.result,o=[];a.forEach((function(t){o.push({key:t.ID,ID:t.ID,name:t.name,position:t.position,allowNewLine:t.allowNewLine,showComposition:t.showComposition})})),t.data=o.sort((function(t,e){return t.position-e.position}))}}))},check:function(t,e,a){var o=this;t.stopPropagation();var n=Object(i["a"])(this.data);this.putModule(e.ID,this.data[a]).then((function(){n[a].isEdit=!1,o.data=n}))},handleEdit:function(t,e,a){t.stopPropagation();var o=Object(i["a"])(this.data);o[a].isEdit=!0,this.data=o},up:function(t,e,a){if(t.stopPropagation(),a>0){var o=a-1,n=this.data[o];if(n){var s=Object(i["a"])(this.data),r=s[a].position,l=s[o].position;s[o].position=r,s[a].position=l,this.putModule(e.ID,s[a]),this.putModule(n.ID,s[o])}}},down:function(t,e,a){if(t.stopPropagation(),a<this.data.length-1){var o=a+1,n=this.data[o];if(n){var s=Object(i["a"])(this.data),r=s[a].position,l=s[o].position;s[o].position=r,s[a].position=l,this.putModule(e.ID,s[a]),this.putModule(n.ID,s[o])}}},createModule:function(){var t=this,e=0;this.data&&this.data.length&&this.data[this.data.length-1]&&(e=this.data[this.data.length-1].position);var a={position:e+1,name:"Новый модуль",showComposition:!1,allowNewLine:!1};s["a"].post("/modules",a).then((function(e){e&&e.data&&t.loadModules()})).catch((function(t){console.log(t)}))},handleDelete:function(t,e){var a=this;t.stopPropagation(),s["a"].delete("/modules?id=".concat(e)).then((function(t){t&&t.data&&"OK"===t.data.result&&(a.data=a.data.filter((function(t){return t.ID!==e})))})).catch((function(t){console.log(t)}))},clickItem:function(t){this.$router.push({path:"/admin/modules/".concat(t.ID)})}}},c=l,d=(a("62e1"),a("2877")),u=Object(d["a"])(c,o,n,!1,null,"7ea0eca0",null);e["default"]=u.exports},"4df4":function(t,e,a){"use strict";var o=a("0366"),n=a("7b0b"),i=a("9bdd"),s=a("e95a"),r=a("50c4"),l=a("8418"),c=a("35a1");t.exports=function(t){var e,a,d,u,f,m,p=n(t),h="function"==typeof this?this:Array,v=arguments.length,b=v>1?arguments[1]:void 0,g=void 0!==b,y=c(p),w=0;if(g&&(b=o(b,v>2?arguments[2]:void 0,2)),void 0==y||h==Array&&s(y))for(e=r(p.length),a=new h(e);e>w;w++)m=g?b(p[w],w):p[w],l(a,w,m);else for(u=y.call(p),f=u.next,a=new h;!(d=f.call(u)).done;w++)m=g?i(u,b,[d.value,w],!0):d.value,l(a,w,m);return a.length=w,a}},"51be":function(t,e,a){"use strict";a("1b7a")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var o=a("1d80"),n=a("5899"),i="["+n+"]",s=RegExp("^"+i+i+"*"),r=RegExp(i+i+"*$"),l=function(t){return function(e){var a=String(o(e));return 1&t&&(a=a.replace(s,"")),2&t&&(a=a.replace(r,"")),a}};t.exports={start:l(1),end:l(2),trim:l(3)}},"5a34":function(t,e,a){var o=a("44e7");t.exports=function(t){if(o(t))throw TypeError("The method doesn't accept regular expressions");return t}},"62e1":function(t,e,a){"use strict";a("a048")},6547:function(t,e,a){var o=a("a691"),n=a("1d80"),i=function(t){return function(e,a){var i,s,r=String(n(e)),l=o(a),c=r.length;return l<0||l>=c?t?"":void 0:(i=r.charCodeAt(l),i<55296||i>56319||l+1===c||(s=r.charCodeAt(l+1))<56320||s>57343?t?r.charAt(l):i:t?r.slice(l,l+2):s-56320+(i-55296<<10)+65536)}};t.exports={codeAt:i(!1),charAt:i(!0)}},7406:function(t,e,a){"use strict";a("0fc9")},7443:function(t,e,a){},"762c":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"report"},[a("a-table",{attrs:{pagination:!1,columns:t.columns,"data-source":t.data}})],1)},n=[],i=(a("99af"),a("4160"),a("d81d"),a("b0c0"),a("d3b7"),a("159b"),a("ddb0"),a("5530")),s=a("408b"),r={name:"Report",data:function(){return{columns:[],data:[]}},mounted:function(){var t=this;s["a"].get("/report?limit=all").then((function(e){if(e&&e.data){var a=Object(i["a"])({},e.data.result),o=[{title:"Название блока / тип исполнения",dataIndex:"name",key:"name"}];a.headers.forEach((function(t,e){o.push({title:t,dataIndex:e+1,key:e+1})})),t.columns=o;var n=a.rows.map((function(t,e){var a={key:e,name:"".concat(t.composition.name," / ").concat(t.composition.desc)};return t.values.forEach((function(t,e){a[e+1]=t})),a}));t.data=n}}))}},l=r,c=(a("0b83"),a("2877")),d=Object(c["a"])(l,o,n,!1,null,"6981d890",null);e["default"]=d.exports},"7db0":function(t,e,a){"use strict";var o=a("23e7"),n=a("b727").find,i=a("44d2"),s=a("ae40"),r="find",l=!0,c=s(r);r in[]&&Array(1)[r]((function(){l=!1})),o({target:"Array",proto:!0,forced:l||!c},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i(r)},"88c5":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("h1",[t._v("Заявка на изготовление № "+t._s(t.$route.params.id))]),a("Order",{attrs:{type:"edit"}})],1)},n=[],i=a("fc27"),s={name:"Home",components:{Order:i["a"]}},r=s,l=(a("d599"),a("2877")),c=Object(l["a"])(r,o,n,!1,null,"ed66f5da",null);e["default"]=c.exports},"88f2":function(t,e,a){"use strict";a("c5c0")},"8cb4":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.currentModule.name?a("div",{staticClass:"module"},[a("h1",[t._v(t._s(t.currentModule&&t.currentModule.name))]),a("p",[t._v("Модуль - блок таблица на форме.")]),[a("a-checkbox",{attrs:{checked:t.currentModule.allowNewLine},on:{change:function(e){return t.onChangeCheckbox({allowNewLine:e.target.checked})}}},[t._v(" Добавление новых строк ")]),a("br"),a("a-checkbox",{attrs:{checked:t.currentModule.showComposition},on:{change:function(e){return t.onChangeCheckbox({showComposition:e.target.checked})}}},[t._v(" Показывать состав модуля ")]),a("br"),a("list",{attrs:{data:t.fields,needUpDownArrows:!0,needCheckbox:!0},on:{handleChangeCheckbox:t.handleChangeCheckboxIsEditable,up:t.up,down:t.down,check:t.check,handleEdit:t.handleEdit,handleDelete:t.handleDelete,createListItem:t.createField}}),a("br"),a("fields-table",{attrs:{title:"Таблица значений",actions:{copy:!0,delete:!0,save:!0},columns:t.fieldsColumns,columnNames:t.fieldsColumnNames,data:t.possibleValuesData,compositionData:t.compositionDataForFields},on:{handleChange:t.handleChangePossibleValues,saveRow:t.saveRowPossibleValues,deleteRow:t.deleteRowPossibleValues,copyRow:t.copyRowPossibleValues,addRow:t.addRowPossibleValues}}),a("fields-table",{attrs:{title:"Таблица Состава",actions:{delete:!0,save:!0},columns:t.compositionColumns,columnNames:t.compositionColumnNames,data:t.compositionData},on:{handleChange:t.handleChangeComposition,saveRow:t.saveRowComposition,deleteRow:t.deleteRowComposition,addRow:t.addRowComposition}})]],2):t._e()},n=[],i=(a("99af"),a("4de4"),a("c740"),a("4160"),a("d81d"),a("a434"),a("b0c0"),a("d3b7"),a("159b"),a("ddb0"),a("5530")),s=a("2909"),r=a("408b"),l=a("2e90"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fields-table"},[t.title?a("h3",[t._v(t._s(t.title))]):t._e(),a("a-button",{staticClass:"add-row",attrs:{type:"primary"},on:{click:function(){return t.$emit("addRow")}}},[t._v(" Добавить строку ")]),a("a-table",{attrs:{pagination:!1,columns:t.columns,"data-source":t.data},scopedSlots:t._u([t._l(t.columnNames,(function(e){return{key:e,fn:function(o,n,i){return[a("a-form-item",{key:e},[a("a-input",{attrs:{value:n[e],size:"large"},on:{change:function(a){return t.handleChange(a.target.value,i,e)}}})],1)]}}})),{key:"sostav",fn:function(e,o,n){return[a("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",value:o.sostav,size:"large"},on:{change:function(e){return t.handleChangeTags(e,n)}}},t._l(t.compositionData,(function(e){return a("a-select-option",{key:e.ID},[t._v(" "+t._s(e.name)+" ")])})),1)]}},{key:"operations",fn:function(e,o,n){return[t.actions.copy?a("a",{on:{click:function(){return t.$emit("copyRow",n)}}},[a("a-icon",{attrs:{type:"copy"}})],1):t._e(),t.actions.copy?a("a-divider",{attrs:{type:"vertical"}}):t._e(),t.actions.save?a("a",{class:[o.needSave?"need-save":"saved"],on:{click:function(){return t.$emit("saveRow",n)}}},[a("a-icon",{attrs:{type:"cloud-upload"}})],1):t._e(),a("a-divider",{attrs:{if:"actions.save",type:"vertical"}}),t.actions.delete?a("a-popconfirm",{attrs:{slot:"actions",title:"Вы уверены?"},on:{confirm:function(){return t.$emit("deleteRow",n)}},slot:"actions"},[a("a",{attrs:{href:"javascript:;"}},[a("a-icon",{attrs:{type:"delete"}})],1)]):t._e()]}}],null,!0)})],1)},d=[],u={name:"FieldsTable",props:{data:Array,columns:Array,columnNames:Array,title:String,actions:Object,compositionData:Array},methods:{handleChange:function(t,e,a){var o=Object(s["a"])(this.data);o[e][a]=t,o[e].needSave=!0,this.$emit("handleChange",o,e,a,t)},handleChangeTags:function(t,e){var a=Object(s["a"])(this.data);a[e].compositions=t,a[e].needSave=!0,this.$emit("handleChange",a,e)}}},f=u,m=(a("7406"),a("2877")),p=Object(m["a"])(f,c,d,!1,null,"8c3435c4",null),h=p.exports,v={components:{List:l["a"],FieldsTable:h},name:"EditModule",data:function(){return{currentModule:{},fields:[],possibleValues:[],compositionColumns:[{title:"Наименование",key:"name",dataIndex:"name",width:"200px",scopedSlots:{customRender:"name"}},{title:"Название для расчетов",key:"calcName",dataIndex:"calcName",width:"200px",scopedSlots:{customRender:"calcName"}},{title:"Количество",key:"count",dataIndex:"count",width:"120px",scopedSlots:{customRender:"count"}},{title:"Описание",key:"desc",dataIndex:"desc",scopedSlots:{customRender:"desc"}},{title:"Действия",key:"operations",dataIndex:"operations",width:"120px",scopedSlots:{customRender:"operations"}}],compositionColumnNames:["name","calcName","count","desc","sostav","operations"],compositionData:[]}},computed:{fieldsColumns:function(){var t=[{title:"Состав",key:"sostav",dataIndex:"sostav",scopedSlots:{customRender:"sostav"}},{title:"Действия",key:"operations",dataIndex:"operations",width:"160px",scopedSlots:{customRender:"operations"}}];return this&&this.fields&&this.fields.length?[].concat(Object(s["a"])(this.fields.map((function(t){return{title:t.name,key:t.ID,dataIndex:t.ID,width:"200px",scopedSlots:{customRender:"".concat(t.ID)}}}))),t):[]},fieldsColumnNames:function(){var t=["sostav","operations"];return this&&this.fields&&this.fields.length?[].concat(Object(s["a"])(this.fields.map((function(t){return t.ID}))),t):[].concat(t)},possibleValuesData:function(){return this.possibleValues&&this.possibleValues.length?this.possibleValues.map((function(t,e){var a=Object(s["a"])(t.values),o=[];t&&t.compositions&&(o=Object(s["a"])(t.compositions));var n={key:e,needSave:t.needSave};return a.forEach((function(t){"undefined"!==typeof t.FieldID&&null!==t.FieldID&&(n[t.FieldID]=t.Value)})),n.sostav=o,n})):[]},compositionDataForFields:function(){return this.compositionData.filter((function(t){return!!t.ID}))}},mounted:function(){this.loadFields(this.$route.params.id),this.loadModule(this.$route.params.id),this.loadPossibleValues(this.$route.params.id),this.loadCompositions(this.$route.params.id)},beforeRouteUpdate:function(t,e,a){this.currentModule={},this.fields=[],this.loadFields(t.params.id),this.loadModule(t.params.id),this.loadPossibleValues(t.params.id),this.loadCompositions(t.params.id),a()},methods:{loadModule:function(t){var e=this;r["a"].get("/modules?id=".concat(t)).then((function(t){t&&t.data&&(e.currentModule=Object(i["a"])({},t.data.result[0]))})).catch((function(t){console.log(t)}))},loadPossibleValues:function(t){var e=this;r["a"].get("/module/".concat(t,"/possibleValues")).then((function(t){t&&t.data&&(e.possibleValues=Object(s["a"])(t.data.result))})).catch((function(t){console.log(t)}))},loadFields:function(t){var e=this;r["a"].get("/module/".concat(t,"/fields?limit=all")).then((function(t){t&&t.data&&(e.fields=t.data.result.sort((function(t,e){return t.position-e.position})))})).catch((function(t){console.log(t)}))},loadCompositions:function(t){var e=this;r["a"].get("/module/".concat(t,"/composition")).then((function(t){if(t&&t.data){var a=Object(s["a"])(e.compositionData).filter((function(t){return t.needSave}));e.compositionData=[].concat(Object(s["a"])(t.data.result),Object(s["a"])(a)).map((function(t,e){return Object(i["a"])(Object(i["a"])({needSave:!1},t),{},{key:e})}))}})).catch((function(t){console.log(t)}))},putField:function(t,e){var a=this;return r["a"].put("/module/".concat(this.$route.params.id,"/fields?id=").concat(t),e).then((function(t){t&&t.data&&a.loadFields(a.$route.params.id)})).catch((function(t){console.log(t)}))},handleChangeComposition:function(t){this.compositionData=Object(s["a"])(t)},handleChangePossibleValues:function(t,e,a){var o=Object(s["a"])(this.possibleValues);if(o[e]&&o[e].values){var n=Object(s["a"])(o[e].values),i=n.findIndex((function(t){return t.FieldID===a}));i>=0?n[i].Value=t[e][a]:n.push({FieldID:a,ModuleID:this.$route.params.id,Value:t[e][a]}),o[e].values=n,o[e].needSave=!0,o[e].compositions=t[e].compositions,this.possibleValues=o}},deleteRowComposition:function(t){var e=this,a=this.compositionData[t];a.ID?r["a"].delete("/module/".concat(this.$route.params.id,"/composition?id=").concat(a.ID),a).then((function(a){a&&a.data&&e.compositionData.splice(t,1)})).catch((function(t){console.log(t)})):this.compositionData.splice(t,1)},saveRowComposition:function(t){var e=this,a=Object(i["a"])(Object(i["a"])({},this.compositionData[t]),{},{count:+this.compositionData[t].count}),o=Object(s["a"])(this.compositionData);a&&a.ID?r["a"].put("/module/".concat(this.$route.params.id,"/composition?id=").concat(a.ID),a).then((function(a){a&&a.data&&(o[t]=Object(i["a"])(Object(i["a"])(Object(i["a"])({},o[t]),a.data.result),{},{needSave:!1}),e.compositionData=o)})).catch((function(t){console.log(t)})):r["a"].post("/module/".concat(this.$route.params.id,"/composition"),a).then((function(a){a&&a.data&&(o[t]=Object(i["a"])(Object(i["a"])(Object(i["a"])({},e.compositionData[t]),a.data.result),{},{needSave:!1}),e.compositionData=o)})).catch((function(t){console.log(t)}))},deleteRowPossibleValues:function(t){var e=this,a=this.possibleValues[t];a.recordID?r["a"].delete("/module/".concat(this.$route.params.id,"/possibleValues?id=").concat(a.recordID)).then((function(a){a&&a.data&&e.possibleValues.splice(t,1)})).catch((function(t){console.log(t)})):this.possibleValues.splice(t,1)},saveRowPossibleValues:function(t){var e=this,a=Object(s["a"])(this.possibleValues),o=Object(i["a"])(Object(i["a"])({},a[t]),{},{values:a[t].values.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{ModuleID:+t.ModuleID})}))});o&&o.recordID?r["a"].put("/module/".concat(this.$route.params.id,"/possibleValues"),o).then((function(o){o&&o.data&&(a[t]=Object(i["a"])(Object(i["a"])(Object(i["a"])({},a[t]),o.data.result),{},{needSave:!1}),e.possibleValues=a)})).catch((function(t){console.log(t)})):r["a"].post("/module/".concat(this.$route.params.id,"/possibleValues"),o).then((function(o){o&&o.data&&(a[t]=Object(i["a"])(Object(i["a"])(Object(i["a"])({},a[t]),o.data.result),{},{needSave:!1}),e.possibleValues=a)})).catch((function(t){console.log(t)}))},addRowComposition:function(){var t=0;this.compositionData[this.compositionData.length-1]&&(t=+this.compositionData[this.compositionData.length-1].key+1),this.compositionData.push({key:Math.max(this.compositionData.length,t),name:"",nameCalc:"",count:"",description:"",needSave:!0})},addRowPossibleValues:function(){var t=this,e=Object(s["a"])(this.possibleValues),a={needSave:!0};a.values=this.fields.map((function(e){return{FieldID:e.ID,ModuleID:t.$route.params.id,Value:""}})),e[this.possibleValues.length]=a,this.possibleValues=e},copyRowPossibleValues:function(t){var e=Object(s["a"])(this.possibleValues),a=e[t],o={needSave:!0};o.values=a.values.map((function(t){return{FieldID:t.FieldID,ModuleID:t.ModuleID,Value:t.Value}})),o.compositions=Object(s["a"])(a.compositions),e[this.possibleValues.length]=o,this.possibleValues=e},up:function(t,e,a){if(t.stopPropagation(),a>0){var o=a-1,n=this.fields[o];if(n){var i=Object(s["a"])(this.fields),r=i[a].position,l=i[o].position;i[o].position=r,i[a].position=l,this.putField(e.ID,i[a]),this.putField(n.ID,i[o])}}},down:function(t,e,a){if(t.stopPropagation(),a<this.fields.length-1){var o=a+1,n=this.fields[o];if(n){var i=Object(s["a"])(this.fields),r=i[a].position,l=i[o].position;i[o].position=r,i[a].position=l,this.putField(e.ID,i[a]),this.putField(n.ID,i[o])}}},check:function(t,e,a){var o=this,n=Object(s["a"])(this.fields);this.putField(e.ID,this.fields[a]).then((function(){n[a].isEdit=!1,o.fields=n}))},handleEdit:function(t,e,a){var o=Object(s["a"])(this.fields);o[a].isEdit=!0,this.fields=o},handleChangeCheckboxIsEditable:function(t,e,a){var o=this,n=Object(s["a"])(this.fields);n[a].isEditable=t,this.putField(e.ID,n[a]).then((function(t){t&&t.data&&(o.fields=n)}))},handleDelete:function(t,e){var a=this;r["a"].delete("/module/".concat(this.$route.params.id,"/fields?id=").concat(e)).then((function(t){t&&t.data&&"OK"===t.data.result&&a.loadFields(a.$route.params.id)})).catch((function(t){console.log(t)}))},createField:function(){var t=this,e=0;this.fields&&this.fields.length&&this.fields[this.fields.length-1]&&(e=this.fields[this.fields.length-1].position);var a={position:e+1,name:"Новое свойство",isEditable:!1};r["a"].post("module/".concat(this.$route.params.id,"/fields"),a).then((function(e){e&&e.data&&t.loadFields(t.$route.params.id)})).catch((function(t){console.log(t)}))},onChangeCheckbox:function(t){this.currentModule=Object(i["a"])(Object(i["a"])({},this.currentModule),t),this.putModule(this.currentModule),this.$emit("loadModules")},putModule:function(t){var e=this;return r["a"].put("/modules?id=".concat(this.$route.params.id),t).then((function(t){t&&t.data&&e.loadModule(e.$route.params.id)})).catch((function(t){console.log(t)}))}}},b=v,g=(a("0831"),Object(m["a"])(b,o,n,!1,null,"6ff45751",null));e["default"]=g.exports},"937f":function(t,e,a){},"943c":function(t,e,a){},"98ca":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"templates"},[a("div",{staticClass:"wrapper"},[a("a-list",{staticClass:"demo-loadmore-list",attrs:{"item-layout":"horizontal","data-source":t.data},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{on:{click:function(){return t.clickItem(e)}}},[a("a-popconfirm",{attrs:{title:"Вы уверены?"},on:{confirm:function(a){return t.handleDelete(a,e.ID)}}},[a("a",{attrs:{slot:"actions",href:"javascript:;"},slot:"actions"},[t._v("Удалить")])]),a("a-list-item-meta",[a("a",{attrs:{slot:"title",href:"#"},slot:"title"},[t._v(t._s(e.name))])])],1)}}])})],1)])},n=[],i=(a("4de4"),a("4160"),a("b0c0"),a("159b"),a("408b")),s={name:"Templates",data:function(){return{data:[]}},mounted:function(){var t=this;i["a"].get("/orderTemplate?limit=all").then((function(e){if(e&&e.data){var a=e.data.result,o=[];a.forEach((function(t){o.push({key:t.ID,ID:t.ID,name:t.name})})),t.data=o}}))},methods:{deleteRow:function(t){this.$emit("deleteRow",t)},handleDelete:function(t,e){var a=this;t.stopPropagation(),i["a"].delete("/orderTemplate?id=".concat(e)).then((function(t){t&&t.data&&"OK"===t.data.result&&(a.data=a.data.filter((function(t){return t.ID!==e})))})).catch((function(t){console.log(t)}))},clickItem:function(t){this.$router.push({path:"/edit-template/".concat(t.ID)})}}},r=s,l=(a("df62"),a("2877")),c=Object(l["a"])(r,o,n,!1,null,"2e9bd477",null);e["default"]=c.exports},"9bdd":function(t,e,a){var o=a("825a"),n=a("2a62");t.exports=function(t,e,a,i){try{return i?e(o(a)[0],a[1]):e(a)}catch(s){throw n(t),s}}},a048:function(t,e,a){},a434:function(t,e,a){"use strict";var o=a("23e7"),n=a("23cb"),i=a("a691"),s=a("50c4"),r=a("7b0b"),l=a("65f0"),c=a("8418"),d=a("1dde"),u=a("ae40"),f=d("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!f||!m},{splice:function(t,e){var a,o,d,u,f,m,g=r(this),y=s(g.length),w=n(t,y),k=arguments.length;if(0===k?a=o=0:1===k?(a=0,o=y-w):(a=k-2,o=h(p(i(e),0),y-w)),y+a-o>v)throw TypeError(b);for(d=l(g,o),u=0;u<o;u++)f=w+u,f in g&&c(d,u,g[f]);if(d.length=o,a<o){for(u=w;u<y-o;u++)f=u+o,m=u+a,f in g?g[m]=g[f]:delete g[m];for(u=y;u>y-o+a;u--)delete g[u-1]}else if(a>o)for(u=y-o;u>w;u--)f=u+o-1,m=u+a-1,f in g?g[m]=g[f]:delete g[m];for(u=0;u<a;u++)g[u+w]=arguments[u+2];return g.length=y-o+a,d}})},a630:function(t,e,a){var o=a("23e7"),n=a("4df4"),i=a("1c7e"),s=!i((function(t){Array.from(t)}));o({target:"Array",stat:!0,forced:s},{from:n})},ab13:function(t,e,a){var o=a("b622"),n=o("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[n]=!1,"/./"[t](e)}catch(o){}}return!1}},ad6d:function(t,e,a){"use strict";var o=a("825a");t.exports=function(){var t=o(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},ae65:function(t,e,a){},b02e:function(t,e,a){"use strict";a("2d18")},b0c0:function(t,e,a){var o=a("83ab"),n=a("9bf2").f,i=Function.prototype,s=i.toString,r=/^\s*function ([^ (]*)/,l="name";o&&!(l in i)&&n(i,l,{configurable:!0,get:function(){try{return s.call(this).match(r)[1]}catch(t){return""}}})},bb41:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("h1",[t._v("Заявка на изготовление")]),a("Order",{attrs:{type:"create"}})],1)},n=[],i=a("fc27"),s={name:"Home",components:{Order:i["a"]}},r=s,l=(a("88f2"),a("2877")),c=Object(l["a"])(r,o,n,!1,null,"796d5055",null);e["default"]=c.exports},bc8a:function(t,e,a){"use strict";a("937f")},c0a8:function(t,e,a){},c358:function(t,e,a){},c5c0:function(t,e,a){},c740:function(t,e,a){"use strict";var o=a("23e7"),n=a("b727").findIndex,i=a("44d2"),s=a("ae40"),r="findIndex",l=!0,c=s(r);r in[]&&Array(1)[r]((function(){l=!1})),o({target:"Array",proto:!0,forced:l||!c},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i(r)},c8d2:function(t,e,a){var o=a("d039"),n=a("5899"),i="​᠎";t.exports=function(t){return o((function(){return!!n[t]()||i[t]()!=i||n[t].name!==t}))}},c975:function(t,e,a){"use strict";var o=a("23e7"),n=a("4d64").indexOf,i=a("a640"),s=a("ae40"),r=[].indexOf,l=!!r&&1/[1].indexOf(1,-0)<0,c=i("indexOf"),d=s("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:l||!c||!d},{indexOf:function(t){return l?r.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})},caad:function(t,e,a){"use strict";var o=a("23e7"),n=a("4d64").includes,i=a("44d2"),s=a("ae40"),r=s("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!r},{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},d28b:function(t,e,a){var o=a("746f");o("iterator")},d599:function(t,e,a){"use strict";a("0f9d")},d81d:function(t,e,a){"use strict";var o=a("23e7"),n=a("b727").map,i=a("1dde"),s=a("ae40"),r=i("map"),l=s("map");o({target:"Array",proto:!0,forced:!r||!l},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},ddb0:function(t,e,a){var o=a("da84"),n=a("fdbc"),i=a("e260"),s=a("9112"),r=a("b622"),l=r("iterator"),c=r("toStringTag"),d=i.values;for(var u in n){var f=o[u],m=f&&f.prototype;if(m){if(m[l]!==d)try{s(m,l,d)}catch(h){m[l]=d}if(m[c]||s(m,c,u),n[u])for(var p in i)if(m[p]!==i[p])try{s(m,p,i[p])}catch(h){m[p]=i[p]}}}},de48:function(t,e,a){"use strict";a("c0a8")},df62:function(t,e,a){"use strict";a("ae65")},e01a:function(t,e,a){"use strict";var o=a("23e7"),n=a("83ab"),i=a("da84"),s=a("5135"),r=a("861d"),l=a("9bf2").f,c=a("e893"),d=i.Symbol;if(n&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};c(f,d);var m=f.prototype=d.prototype;m.constructor=f;var p=m.toString,h="Symbol(test)"==String(d("test")),v=/^Symbol\((.*)\)[^)]+$/;l(m,"description",{configurable:!0,get:function(){var t=r(this)?this.valueOf():this,e=p.call(t);if(s(u,t))return"";var a=h?e.slice(7,-1):e.replace(v,"$1");return""===a?void 0:a}}),o({global:!0,forced:!0},{Symbol:f})}},e138:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-template"},[a("h1",[t._v("Заявка на изготовление (Шаблон) № "+t._s(t.$route.params.id))]),a("Order",{attrs:{type:"edit-template"}})],1)},n=[],i=a("fc27"),s={name:"EditTemplate",components:{Order:i["a"]}},r=s,l=(a("edc7"),a("2877")),c=Object(l["a"])(r,o,n,!1,null,"02a8ab7f",null);e["default"]=c.exports},e547:function(t,e,a){"use strict";a("c358")},ece3:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("h1",[t._v("Изготовленные")]),a("orders",{attrs:{pagination:t.pagination,loading:t.loading,type:"finished",data:t.data},on:{handleTableChange:t.handleTableChange}})],1)},n=[],i=(a("99af"),a("4160"),a("159b"),a("5530")),s=a("c1df"),r=a.n(s),l=a("408b"),c=a("e58c"),d=20,u={name:"OrdersCompleted",data:function(){return{data:[],loading:!1,pagination:{pageSize:d}}},mounted:function(){this.loadOrders({limit:d,offset:0})},components:{Orders:c["a"]},methods:{loadOrders:function(t){var e=this,a=t.limit,o=t.offset;l["a"].get("/order?status=finished&limit=".concat(a,"&offset=").concat(o)).then((function(t){if(t&&t.data){var a=t.data.result,o=[];a.forEach((function(t){var e=r()(t.createDate).format("DD.MM.YYYY"),a=r()(t.form.checkDate,"YYYY-MM-DD").format("DD.MM.YYYY");o.push(Object(i["a"])(Object(i["a"])({},t.form),{},{createDate:e,key:t.ID,ID:t.ID,checkDate:a}))})),e.data=o;var n=Object(i["a"])({},e.pagination);n.total=t.data.total,e.loading=!1,e.pagination=n}})).catch((function(t){console.log(t)}))},handleTableChange:function(t){var e=Object(i["a"])({},this.pagination);e.current=t.current,this.pagination=e,this.loadOrders({limit:t.pageSize,offset:20*+(t.current-1)})}}},f=u,m=(a("0a74"),a("2877")),p=Object(m["a"])(f,o,n,!1,null,"4149a11a",null);e["default"]=p.exports},edc7:function(t,e,a){"use strict";a("943c")},ef4f:function(t,e,a){"use strict";a("7443")},fb6a:function(t,e,a){"use strict";var o=a("23e7"),n=a("861d"),i=a("e8b5"),s=a("23cb"),r=a("50c4"),l=a("fc6a"),c=a("8418"),d=a("b622"),u=a("1dde"),f=a("ae40"),m=u("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),v=[].slice,b=Math.max;o({target:"Array",proto:!0,forced:!m||!p},{slice:function(t,e){var a,o,d,u=l(this),f=r(u.length),m=s(t,f),p=s(void 0===e?f:e,f);if(i(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?n(a)&&(a=a[h],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return v.call(u,m,p);for(o=new(void 0===a?Array:a)(b(p-m,0)),d=0;m<p;m++,d++)m in u&&c(o,d,u[m]);return o.length=d,o}})},fc27:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-order"},["create"===t.type?a("h3",[t._v("Добавить новую заявку на изготовление устройства")]):t._e(),"edit"===t.type?a("h3",[t._v("Редактировать заявку на изготовление устройства")]):t._e(),a("div",{staticClass:"block-wrp"},[a("main-form",{attrs:{form:t.form,labelCol:t.labelCol,wrapperCol:t.wrapperCol}})],1),t._l(t.modulesBlocks,(function(e){return a("div",{key:e.id,staticClass:"block-wrp"},[a("modules-form",{attrs:{module:e,data:e.data,columns:e.columns,columnNames:e.columnNames},on:{addRow:t.addRowModules,changeModulesForm:t.changeModulesForm,deleteRow:t.deleteRowModules}})],1)})),a("div",{staticClass:"block-wrp"},[a("flex-table",{attrs:{title:"Конфигурация аналоговых блоков:",type:"analogBlocksOptions",data:t.analogBlocksOptions.rows,rowsControls:!0,colsControls:!0},on:{"add-row":t.addRowFlexTable,"remove-row":t.removeRowFlexTable,"add-col":t.addColFlexTable,"remove-col":t.removeColFlexTable,changeFlexTable:t.changeFlexTable}})],1),a("div",{staticClass:"block-wrp"},[a("flex-table",{attrs:{title:"Расположение блоков в терминале:",type:"terminalBlocksLocation",data:t.terminalBlocksLocation.rows,rowsControls:!1,colsControls:!0},on:{"add-row":t.addRowFlexTable,"remove-row":t.removeRowFlexTable,"add-col":t.addColFlexTable,"remove-col":t.removeColFlexTable,changeFlexTable:t.changeFlexTable}})],1),a("div",{staticClass:"block-wrp"},[a("flex-table",{attrs:{title:"Опции:",type:"options",data:t.options.rows,rowsControls:!0,colsControls:!1},on:{"add-row":t.addRowFlexTable,"remove-row":t.removeRowFlexTable,"add-col":t.addColFlexTable,"remove-col":t.removeColFlexTable,changeFlexTable:t.changeFlexTable}})],1),a("div",{staticClass:"block-wrp"},[a("h3",[t._v("Дополнительные требования и замечания:")]),a("div",{staticClass:"description"},[a("a-textarea",{attrs:{rows:12},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)]),a("div",{staticClass:"block-wrp"},[a("p",[t._v(" Дата заказа: "+t._s(t.createDate.format("DD.MM.YYYY"))+" "),a("br"),t._v(" Заказ от Иванова И.И. ")])]),a("div",{staticClass:"block-wrp"},[a("a-button",{attrs:{size:"large",type:"primary"},on:{click:t.createOrder}},[t._v(" "+t._s("create"===this.type?"Создать заказ":"Обновить заказ")+" ")])],1),a("div",{staticClass:"block-wrp",staticStyle:{display:"flex"}},[a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"large"},on:{click:t.createOrderTemplate}},[t._v(" Сохранить как шаблон ")]),a("div",{staticStyle:{position:"relative"}},[t.visibleTemplateNameError?a("label",{staticClass:"template-danger-label"},[t._v(" "+t._s(t.visibleTemplateNameError)+" ")]):t._e(),t.visibleTemplateName?a("a-input",{class:t.visibleTemplateNameError?"template-danger":"",staticStyle:{width:"200px"},attrs:{size:"large",placeholder:"Имя шаблона"},on:{change:t.changetemplateName},model:{value:t.templateName,callback:function(e){t.templateName=e},expression:"templateName"}}):t._e()],1)],1)],2)},n=[],i=(a("99af"),a("4de4"),a("7db0"),a("c740"),a("4160"),a("caad"),a("d81d"),a("a434"),a("b0c0"),a("b64b"),a("d3b7"),a("2532"),a("3ca3"),a("498a"),a("159b"),a("ddb0"),a("2909")),s=a("5530"),r=a("c1df"),l=a.n(r),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-form"},[a("a-form-model",{attrs:{layout:"vertical",model:t.form,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"№ Заказа:"}},[a("a-input",{attrs:{size:"small",placeholder:"xxx/xxx"},model:{value:t.form.orderNumber,callback:function(e){t.$set(t.form,"orderNumber",e)},expression:"form.orderNumber"}})],1),a("a-form-model-item",{attrs:{label:"Тип устройства:"}},[a("a-input",{attrs:{size:"small"},model:{value:t.form.deviceType,callback:function(e){t.$set(t.form,"deviceType",e)},expression:"form.deviceType"}})],1),a("a-form-model-item",{attrs:{label:"Название устройства:"}},[a("a-input",{attrs:{size:"small"},model:{value:t.form.deviceName,callback:function(e){t.$set(t.form,"deviceName",e)},expression:"form.deviceName"}})],1),a("a-form-model-item",{attrs:{label:"Количество:"}},[a("a-input",{attrs:{size:"small"},model:{value:t.form.count,callback:function(e){t.$set(t.form,"count",e)},expression:"form.count"}})],1),a("a-form-model-item",{attrs:{label:"Срок передачи для проверки:"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{locale:t.locale,format:"DD-MM-YYYY",size:"small",type:"date",placeholder:"Выберите дату"},model:{value:t.form.checkDate,callback:function(e){t.$set(t.form,"checkDate",e)},expression:"form.checkDate"}})],1),a("a-form-model-item",{attrs:{label:"Дата отправки:"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{locale:t.locale,format:"DD-MM-YYYY",size:"small",type:"date",placeholder:"Выберите дату"},model:{value:t.form.deliveryDate,callback:function(e){t.$set(t.form,"deliveryDate",e)},expression:"form.deliveryDate"}})],1),a("a-form-model-item",{attrs:{label:"Напряжение оперативного питания, В:"}},[a("a-input",{attrs:{size:"small"},model:{value:t.form.auxiliaryVoltage,callback:function(e){t.$set(t.form,"auxiliaryVoltage",e)},expression:"form.auxiliaryVoltage"}})],1),a("a-form-model-item",{attrs:{label:"Рабочий диапазон температур, С:"}},[a("a-input",{attrs:{size:"small"},model:{value:t.form.workTemp,callback:function(e){t.$set(t.form,"workTemp",e)},expression:"form.workTemp"}})],1),a("a-form-model-item",{attrs:{label:"Напряжение дискретных входов, В:"}},[a("a-input",{attrs:{size:"small"},model:{value:t.form.discreteInputVoltage,callback:function(e){t.$set(t.form,"discreteInputVoltage",e)},expression:"form.discreteInputVoltage"}})],1),a("a-form-model-item",{attrs:{label:"Название устройства для шильдика:"}},[a("a-input",{attrs:{size:"small"},model:{value:t.form.nameplateLabel,callback:function(e){t.$set(t.form,"nameplateLabel",e)},expression:"form.nameplateLabel"}})],1),a("a-form-model-item",{attrs:{label:"Заводской номер терминала:"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{mode:"tags"},model:{value:t.form.terminalVendorCodes,callback:function(e){t.$set(t.form,"terminalVendorCodes",e)},expression:"form.terminalVendorCodes"}})],1),a("a-form-model-item",{attrs:{label:"Модификация вкладок:"}},[a("a-input",{attrs:{size:"small"},model:{value:t.form.tabMode,callback:function(e){t.$set(t.form,"tabMode",e)},expression:"form.tabMode"}})],1),a("a-switch",{attrs:{size:"small"},model:{value:t.form.isConsist,callback:function(e){t.$set(t.form,"isConsist",e)},expression:"form.isConsist"}}),a("label",{staticClass:"ant-form-item-label",staticStyle:{width:"272px",display:"inline","padding-left":"10px",color:"rgba(0, 0, 0, 0.85)"}},[t._v(" Терминал входит в состав шкафа: ")])],1)],1)},d=[],u=a("41b2"),f=a.n(u),m={today:"Сегодня",now:"Сейчас",backToToday:"Текущая дата",ok:"Ok",clear:"Очистить",month:"Месяц",year:"Год",timeSelect:"Выбрать время",dateSelect:"Выбрать дату",monthSelect:"Выбрать месяц",yearSelect:"Выбрать год",decadeSelect:"Выбрать десятилетие",yearFormat:"YYYY",dateFormat:"D-M-YYYY",dayFormat:"D",dateTimeFormat:"D-M-YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Предыдущий месяц (PageUp)",nextMonth:"Следующий месяц (PageDown)",previousYear:"Предыдущий год (Control + left)",nextYear:"Следующий год (Control + right)",previousDecade:"Предыдущее десятилетие",nextDecade:"Следущее десятилетие",previousCentury:"Предыдущий век",nextCentury:"Следующий век"},p={placeholder:"Выберите время"},h=p,v={lang:f()({placeholder:"Выберите дату",rangePlaceholder:["Начальная дата","Конечная дата"]},m),timePickerLocale:f()({},h)},b=v,g=(a("957c"),{name:"MainForm",data:function(){return{locale:b,moment:l.a}},props:{labelCol:Object,wrapperCol:Object,form:Object}}),y=g,w=(a("e547"),a("2877")),k=Object(w["a"])(y,c,d,!1,null,"96426f62",null),D=k.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modules-form"},[t.module.name?a("h3",[t._v(t._s(t.module.name))]):t._e(),a("a-table",{attrs:{pagination:!1,columns:t.columns,"data-source":t.data},scopedSlots:t._u([t._l(t.columnNames,(function(e){return{key:e,fn:function(o,n,i){return[a("a-form-item",{key:e},[t.columnsMapByKey[e]&&t.columnsMapByKey[e].isEditable?a("a-input",{attrs:{value:n[e],size:"large",placeholder:"xxx/xxx"},on:{change:function(a){return t.handleChange(a.target.value,n.key,i,e)}}}):t._e(),t.columnsMapByKey[e]&&t.columnsMapByKey[e].isEditable?t._e():a("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","option-filter-prop":"children","filter-option":t.filterOption,size:"large"},on:{change:function(a){return t.handleChange(a,n.key,i,e)}}},[a("a-select-option",{attrs:{value:"jack"}},[t._v(" jack ")]),a("a-select-option",{attrs:{value:"back"}},[t._v(" back ")])],1)],1)]}}})),{key:"operation",fn:function(e,o){return[t.data.length?a("a-popconfirm",{attrs:{title:"Вы уверены?"},on:{confirm:function(){return t.$emit("deleteRow",t.module.ID,o.key)}}},[a("a",{attrs:{href:"javascript:;"}},[t._v("Удалить")])]):t._e()]}}],null,!0)}),t.module.allowNewLine?a("a-button",{attrs:{type:"primary"},on:{click:function(){return t.$emit("addRow",t.module.ID)}}},[t._v(" Добавить строку ")]):t._e()],1)},x=[],O=(a("c975"),{name:"MainForm",props:{data:Array,columns:Array,columnNames:Array,module:Object},computed:{columnsMapByKey:function(){var t={};return this.columns&&this.columns.length&&this.columns.forEach((function(e){t[e.key]=e})),t}},methods:{handleChange:function(t,e,a,o){var n=Object(i["a"])(this.data);n[a][o]=t,this.$emit("changeModulesForm",n,this.module.ID)},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0}}}),_=O,I=(a("b02e"),Object(w["a"])(_,C,x,!1,null,"01543c0e",null)),j=I.exports,M=a("408b"),$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-table"},[a("h3",[t._v(t._s(t.title))]),a("div",{staticClass:"v-flex-wrapper"},t._l(t.data,(function(e,o){return a("div",{key:o,staticClass:"v-flex-row"},[t.colsControls&&0===o?a("a-button",{staticClass:"add-col",attrs:{type:"primary"},on:{click:function(){return t.$emit("add-col",t.type)}}},[t._v(" Добавить столбец ")]):t._e(),t.rowsControls&&0!==o?a("a-popconfirm",{attrs:{title:"Вы уверены?"},on:{confirm:function(){return t.$emit("remove-row",o,t.type)}}},[a("a-button",{staticClass:"remove-row",attrs:{type:"danger"}},[t._v(" Удалить строку ")])],1):t._e(),t._l(e,(function(e,n){return a("div",{key:n},[t.colsControls&&0===o&&0!==n?a("a-popconfirm",{attrs:{title:"Вы уверены?"},on:{confirm:function(){return t.$emit("remove-col",n,t.type)}}},[a("a-button",{staticClass:"remove-col",attrs:{type:"danger"}},[t._v(" Удалить столбец ")])],1):t._e(),t.rowsControls&&o===t.data.length-1&&0===n?a("a-button",{staticClass:"add-row",attrs:{type:"primary"},on:{click:function(){return t.$emit("add-row",t.type)}}},[t._v(" Добавить строку ")]):t._e(),"string"===typeof e?a("a-input",{attrs:{value:e,size:"large"},on:{change:function(a){return t.handleChange(a.target.value,o,n,e,t.type)}}}):t._e(),"string"!==typeof e?a("div",{staticClass:"sub-col-wrp"},t._l(e,(function(i,s){return a("div",{key:s},[a("a-input",{attrs:{value:i,size:"large"},on:{change:function(a){return t.handleChange(a.target.value,o,n,e,t.type,s)}}})],1)})),0):t._e()],1)}))],2)})),0)])},S=[],E={name:"FlexTable",props:{data:Array,rowsControls:Boolean,colsControls:Boolean,title:String,type:String},methods:{getClass:function(t,e){var a="v-double";return 0!==t&&0!==e||(a="v-single"),a},deleteRow:function(t){this.$emit("deleteRow",t)},handleChange:function(t,e,a,o,n,i){this.$emit("changeFlexTable",t,e,a,o,n,i)}}},F=E,T=(a("bc8a"),Object(w["a"])(F,$,S,!1,null,"134a4f12",null)),R=T.exports,A=["orderNumber","deviceType","deviceName","count","checkDate","deliveryDate","createDate","workTemp","auxiliaryVoltage","discreteInputVoltage","nameplateLabel","terminalVendorCodes","tabMode","isConsist"],V=A,N={name:"Order",data:function(){return{visibleTemplateNameError:null,visibleTemplateName:!1,labelCol:{span:16},wrapperCol:{span:10},createDate:l()(new Date),form:{orderNumber:"",deviceType:"",deviceName:"",count:void 0,checkDate:void 0,deliveryDate:void 0,workTemp:"",auxiliaryVoltage:"",discreteInputVoltage:"",nameplateLabel:"",terminalVendorCodes:[],tabMode:"",isConsist:void 0},modules:{data:[]},modulesBlocks:[],analogBlocksOptions:{rows:[["Логический номер","A1"],[["1"],["",""]]]},terminalBlocksLocation:{rows:[[["Логический номер"],["A1"]],[["1"],["~l"]]]},options:{rows:[[[""],[""]]]},note:"",templateName:""}},mounted:function(){var t=this,e=M["a"].get("/modules?limit=all"),a=[e];switch(this.type){case"edit":a.push(M["a"].get("/order?id=".concat(this.$route.params.id)));break;case"edit-template":a.push(M["a"].get("/orderTemplate?id=".concat(this.$route.params.id)));break;default:break}Promise.all(a).then((function(e){if(e&&e.length){t.parseModulesBlockData(e[0]);var a=t.modulesBlocks.map((function(t){return M["a"].get("/module/".concat(t.ID,"/fields"))}));if(Promise.all(a).then((function(e){e.forEach((function(e,a){t.parseModulesBlockColumns(e,a)}))})).catch((function(t){console.log(t)})),"edit"===t.type){var o=e[e.length-1];if(o&&o.data){var n=o.data.result;if(n){var i=n[0];t.parseAndFillOrder(i)}}}if("edit-template"===t.type){var s=e[e.length-1];if(s&&s.data){var r=s.data.result;if(r){var l=r[0];t.parseAndFillOrderTemplate(l)}}}}})).catch((function(t){console.log(t)})),"edit"===this.type&&M["a"].get("/order?id=".concat(this.$route.params.id)).then()},props:{type:String},methods:{changetemplateName:function(t){t&&t.target&&0!==t.target.value.trim()?this.visibleTemplateNameError=null:this.visibleTemplateNameError="Заполните имя шаблона"},parseAndFillOrder:function(t){var e={};if(Object.keys(t).forEach((function(a){V.includes(a)&&(e[a]=t[a])})),t.form){var a=l()(t.createDate,null),o=l()(t.form.deliveryDate,"YYYY-MM-DD"),n=l()(t.form.checkDate,"YYYY-MM-DD");this.form=Object(s["a"])(Object(s["a"])({},t.form),{},{createDate:a,deliveryDate:o,checkDate:n}),this.note=t.form.note}this.analogBlocksOptions=Object(s["a"])({},t.analogBlocksOptions),this.terminalBlocksLocation=Object(s["a"])({},t.terminalBlocksLocation),this.options=Object(s["a"])({},t.options)},parseAndFillOrderTemplate:function(t){var e=Object(s["a"])({},t.order);this.templateName=t.name,this.parseAndFillOrder(e)},getModuleById:function(t){return this.modulesBlocks.find((function(e){return e.ID===t}))},getModuleArrayPositionById:function(t){return this.modulesBlocks.findIndex((function(e){return e.ID===t}))},addRowModules:function(t){var e=this.getModuleArrayPositionById(t),a=Object(i["a"])(this.modulesBlocks);a[e]||(a[e]={});var o=[];a[e].data&&(o=Object(i["a"])(a[e].data));var n=0;a[e]&&a[e].data&&a[e].data[a[e].data.length-1]&&(n=a[e].data[a[e].data.length-1].key),a[e].data=[].concat(Object(i["a"])(o),[{key:n+1,1:"",2:"",3:"",4:"",5:""}]),this.modulesBlocks=a},deleteRowModules:function(t,e){var a=this.getModuleArrayPositionById(t),o=Object(i["a"])(this.modulesBlocks),n=Object(i["a"])(o[a].data);o[a].data=n.filter((function(t){return t.key!==e})),this.modulesBlocks=o},addRowFlexTable:function(t){var e=Object(i["a"])(this[t].rows),a=e[0],o=a.map((function(e,a){return a>0&&"analogBlocksOptions"===t?["",""]:[""]}));e.push(o),this[t].rows=e},addColFlexTable:function(t){var e=Object(i["a"])(this[t].rows);e.forEach((function(e,a){a>0&&"analogBlocksOptions"===t?e.push(["",""]):e.push("")})),this[t].rows=e},removeColFlexTable:function(t,e){var a=Object(i["a"])(this[e].rows);a.forEach((function(e){e.splice(t,1)})),this[e].rows=a},removeRowFlexTable:function(t,e){var a=Object(i["a"])(this[e].rows);a.splice(t,1),this[e].rows=a},changeModulesForm:function(t,e){var a=this.getModuleArrayPositionById(e),o=Object(i["a"])(this.modulesBlocks);o[a].data=t,this.modulesBlocks=o},changeFlexTable:function(t,e,a,o,n,s){var r=Object(i["a"])(this[n].rows);void 0!==s&&null!==s?(r[e][a][s]=t,r[e][a][s]=t):(r[e][a]=t,r[e][a]=t),this[n].rows=r},parseModulesBlockData:function(t){var e=this;if(t&&t.data){var a=t.data.result;a=a.sort((function(t,e){return t.position&&!e.position?-1:t.position-e.position})),this.modulesBlocks=a,a.forEach((function(t){e.addRowModules(t.ID)}))}},parseModulesBlockColumns:function(t,e){if(t&&t.data){var a=t.data.result.sort((function(t,e){return t.position-e.position})).map((function(t){return{title:t.name,key:t.ID,dataIndex:t.ID,scopedSlots:{customRender:"".concat(t.ID)},isEditable:!!t.isEditable}}));a.push({title:"Действия",dataIndex:"operation",scopedSlots:{customRender:"operation"}});var o=Object(i["a"])(this.modulesBlocks);o[e].columns=a,o[e].columnNames=a.map((function(t){return t.dataIndex})),this.modulesBlocks=o}},getOrderModel:function(){var t=l()(new Date),e=l()(this.form.deliveryDate).format("YYYY-MM-DD"),a=l()(this.form.checkDate).format("YYYY-MM-DD"),o=+this.form.count,n={form:Object(s["a"])(Object(s["a"])({},this.form),{},{deliveryDate:e,checkDate:a,count:o,note:this.note}),createDate:t,isConsist:!0,status:"active",bitrixTaskID:"string",bitrixCreatorID:"string",modules:[{moduleID:0,moduleName:"string",rows:[[{fieldID:0,fieldName:"string",value:"string"}]]}],analogBlocksOptions:{rows:this.analogBlocksOptions.rows},terminalBlocksLocation:{rows:this.terminalBlocksLocation.rows},options:{rows:this.options.rows}};return n},createOrder:function(){var t=this;"create"===this.type?M["a"].post("/order",this.getOrderModel()).then((function(){t.$router.push({path:"/"})})).catch((function(t){console.log(t)})):M["a"].put("/order?id=".concat(this.$route.params.id),this.getOrderModel()).then((function(){t.$router.push({path:"/"})})).catch((function(t){console.log(t)}))},createOrderTemplate:function(){var t=this;if(this.visibleTemplateName){if(""===this.templateName.trim())return void(this.visibleTemplateNameError="Заполните имя шаблона");var e=this.getOrderModel(),a={order:e,createDate:e.createDate,bitrixCreatorID:e.bitrixCreatorID,name:this.templateName};M["a"].post("/orderTemplate",a).then((function(){t.$router.push({path:"/templates"})})).catch((function(t){console.log(t)}))}else this.visibleTemplateName=!0}},components:{MainForm:D,ModulesForm:j,FlexTable:R}},Y=N,B=(a("ef4f"),Object(w["a"])(Y,o,n,!1,null,"22a39e30",null));e["a"]=B.exports}}]);
//# sourceMappingURL=about.b6e99f29.js.map